plugins {
  id "java"
  id "checkstyle"
  id "application"
  id "pmd"
  id "build-dashboard"
  id "com.github.jakemarsden.git-hooks" version "0.0.2"
  id "com.github.spotbugs" version "4.0.8"
}

checkstyle {
  config = rootProject.resources.text.fromFile("checkstyle.xml")
  toolVersion "8.32"
  ignoreFailures = false
  maxWarnings = 0
}

spotbugs {
  ignoreFailures = false
  showProgress = true
}

spotbugsMain {
  reports {
    html {
      enabled = true
    }
  }
}

spotbugsTest {
  reports {
    html {
      enabled = true
    }
  }
}

pmd {
  toolVersion = "6.23.0"
  ignoreFailures = false
}

pmdMain {
  reports {
    html {
      enabled = true
    }
  }
}

pmdTest {
  reports {
    html {
      enabled = true
    }
  }
}

gitHooks {
  hooks = ["pre-commit": "build check"]
  hooks = ["pre-push": "build check test"]
}

repositories {
  jcenter()
}

ext {
  junitV = "5.6.0"
}

dependencies {
  testImplementation "org.junit.jupiter:junit-jupiter-api:${junitV}"
  testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:${junitV}"
}

application {
  mainClassName = "io.github.mkdev.App"
}

test {
  useJUnitPlatform()
}
